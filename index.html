<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Bit Animation</title>
    <script src="./libs/multibyte-stream.umd.js"></script>

    <script src="./frames.js"></script>

    <script src="./bit/frame.js"></script>
    <script src="./bit/frame-editor.js"></script>
    <script src="./bit/frame-tools.js"></script>
    <script src="./bit/editor.js"></script>
    <script src="./tool-button.js"></script>
    <script src="./page-layout.js"></script>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      .frame {
        width: 200px;
        height: 200px;
        margin: 50px;
      }

      .frame-tools {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }
    </style>
  </head>
  <body>
    <page-layout type="normal">
      <tool-button
        slot="tools"
        size="30"
        icon="./icons/edit_timeline_icon.png"
        title="Copy Animation into new Editor"
      ></tool-button>
      <tool-button
        slot="tools"
        size="30"
        icon="./icons/export_gif_icon.png"
        title="Export Animation as GIF file"
      ></tool-button>
      <div slot="tools" style="flex: 1;"></div>
      <tool-button
        slot="tools"
        size="30"
        icon="./icons/editor_collapse_icon.png"
        title="Collapse Editor to give more space for Player"
        onclick="setLayoutType('collapsed')"
      ></tool-button>
      <tool-button
        slot="tools"
        size="30"
        icon="./icons/editor_normal_icon.png"
        title="Make Editor and Player size even"
        onclick="setLayoutType('normal')"
      ></tool-button>
      <tool-button
        slot="tools"
        size="30"
        icon="./icons/editor_expand_icon.png"
        title="Expand Editor to give more space for it"
        onclick="setLayoutType('expanded')"
      ></tool-button>
      <bit-player slot="player">Bit Player</bit-player>
      <bit-editor slot="editor"></bit-editor>
    </page-layout>
  </body>
  <script>
    const setLayoutType = (type) => {
      document.querySelector('page-layout').setAttribute('type', type);
    };

    const frames = new BitFrames(() => {
      frames.insertNewFirst();
      frames.insertNewFirst();
      frames.insertNewFirst();
      frames.insertNewFirst();
      frames.insertNewFirst();

      document.querySelector('bit-editor').frames = frames;
    });

    (async () => {
      /*
      document
        .querySelector('bit-frame-editor')
        .addEventListener(
          'bitSwitch',
          async ({ target, detail: { index, column, row } }) => {
            FRAMES[index][row][column] = Number(!FRAMES[index][row][column]);

            const source = renderer.drawToImageSrc(FRAMES[index]);

            target.src = source;
          }
        );
        */
    })();
  </script>
</html>
